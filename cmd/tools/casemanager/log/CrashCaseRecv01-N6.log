os.args=["smartraiden" "--datadir=.smartraiden" "--api-address=127.0.0.1:6006" "--listen-address=127.0.0.1:60060" "--address=0xb02116A9D525dEbfa0D871418bD4954Bc77E2164" "--keystore-path=../../../testdata/casemanager-keystore" "--registry-contract-address=0xe98D5391858e6b0487C06e2FE8eBF0EDd8251372" "--password-file=../../../testdata/casemanager-keystore/pass" "--eth-rpc-endpoint=ws://182.254.155.208:30306" "--verbosity=5" "--debug" "--debugcrash" "--conditionquit={\"QuitEvent\":\"ActionInitTargetStateChange\",\"IsBefore\":false,\"RandomQuit\":false}"]

INFO [06-30|15:49:38.846|cmd/smartraiden/mainimpl/impl.go:145] Welcom to smartraiden,version 0.3

 

INFO [06-30|15:49:38.846|cmd/smartraiden/mainimpl/impl.go:146] os.args=["smartraiden" "--datadir=.smartraiden" "--api-address=127.0.0.1:6006" "--listen-address=127.0.0.1:60060" "--address=0xb02116A9D525dEbfa0D871418bD4954Bc77E2164" "--keystore-path=../../../testdata/casemanager-keystore" "--registry-contract-address=0xe98D5391858e6b0487C06e2FE8eBF0EDd8251372" "--password-file=../../../testdata/casemanager-keystore/pass" "--eth-rpc-endpoint=ws://182.254.155.208:30306" "--verbosity=5" "--debug" "--debugcrash" "--conditionquit={\"QuitEvent\":\"ActionInitTargetStateChange\",\"IsBefore\":false,\"RandomQuit\":false}"] 

TRACE[06-30|15:49:38.847|cmd/smartraiden/mainimpl/impl.go:281] password is 123 

INFO [06-30|15:49:39.707|cmd/smartraiden/mainimpl/impl.go:375] condition quit=params.ConditionQuit{QuitEvent:"ActionInitTargetStateChange", IsBefore:false, RandomQuit:false} 

TRACE[06-30|15:49:39.707|models/db.go:86]                      dbpath=.smartraiden/b02116a9/log.db 

2018/06/30 15:49:39 [impl.go:158] [I] ethclient connection status changed from 0 to 1

TRACE[06-30|15:49:39.82|network/xmpptransport/xmpp.go:137]    b021 new xmpp user 0xb02116A9D525dEbfa0D871418bD4954Bc77E2164 password bfaa730444587939cdaa8a89c0de23747d169900e5ba596a8434354993ea807813b43e929445eaed153b1a83ecd08c3492f3e7afca89457bf6199e994400648e01 

INFO [06-30|15:49:43.281|network/xmpptransport/xmpp.go:251]    changeStatus from 0 to 1 

INFO [06-30|15:49:43.282|raidenService.go:190]                 create raiden service registry=0xe98D5391858e6b0487C06e2FE8eBF0EDd8251372,node=0xb02116A9D525dEbfa0D871418bD4954Bc77E2164 

DEBUG[06-30|15:49:43.341|blockchain/alarmtask.go:74]           starting block number blocknubmer=2551381 

WARN [06-30|15:49:43.429|blockchain/alarmtask.go:114]          alarm missed 0 blocks 

TRACE[06-30|15:49:43.735|network/xmpptransport/xmpp.go:235]    node status change 0xb02116a9d525debfa0d871418bd4954bc77e2164@mobileraiden, deviceType=other,isonline=true 

                   2b0c: 0     aaaa: 1     b021: 2

       2b0c: 0           0           1           0

       aaaa: 1           1           0           1

       b021: 2           0           1           0

INFO [06-30|15:49:48.821|snapshot.go:26]                       restoreSnapshot... 

INFO [06-30|15:49:48.821|snapshot.go:65]                       restore channel... 

INFO [06-30|15:49:48.821|snapshot.go:71]                       new channel created when shutdown 0x5676C2309dD4dc0f5afDbE69d7550DbAA49d8194  

TRACE[06-30|15:49:48.821|models/channels.go:19]                new channel 0x5676C2309dD4dc0f5afDbE69d7550DbAA49d8194 

TRACE[06-30|15:49:48.822|snapshot.go:217]                      restoreToken2Hash2Channels... 

INFO [06-30|15:49:48.822|snapshot.go:120]                      restore statemanager ,last close correct=false 

TRACE[06-30|15:49:48.822|snapshot.go:205]                      restoreRevealSecret...  

TRACE[06-30|15:49:48.822|models/revealsecret.go:129]           GetAllUncompleteSentRevealSecret=([]*models.SentRevealSecret) <nil>

 

TRACE[06-30|15:49:48.822|models/channels.go:31]                save channel 0x5676C2309dD4dc0f5afDbE69d7550DbAA49d8194 

INFO [06-30|15:49:48.824|network/transport.go:166]             udp server listening on 127.0.0.1:60060 

INFO [06-30|15:49:48.824|network/transport.go:168]              listen udp on 127.0.0.1:60060           name=b021

TRACE[06-30|15:49:48.825|network/xmpptransport/xmpp.go:442]    b021 send msg 0xb02116a9d525debfa0d871418bd4954bc77e2164@mobileraiden:0xaaaa7f676a677c0b3c8e4bb14aec7be61365acfe@mobileraiden 7HLTY5MSP7 

TRACE[06-30|15:49:49.356|network/xmpptransport/xmpp.go:219]    b021 7HLTY5MSP7 received response 

TRACE[06-30|15:49:49.356|network/xmpptransport/xmpp.go:235]    node status change 0xaaaa7f676a677c0b3c8e4bb14aec7be61365acfe@mobileraiden, deviceType=other,isonline=true 

30/Jun/2018:15:49:50 +0800 [0;32m200[0m [36;1m65Î¼s[0m "GET /api/1/address HTTP/1.1" [1;30m- "Go-http-client/1.1"[0m

TRACE[06-30|15:49:51.742|network/xmpptransport.go:107]         received from aaaa, message=MediatedTransfer name=b021

TRACE[06-30|15:49:51.742|models/statemanager.go:60]            get ack 53d4 from db,result=0 

TRACE[06-30|15:49:51.742|network/protocol.go:467]              received msg=Message{type=MediatedTransfer expiration=2551480,token=e945,recipient=b021,target=b021,initiator=2b0c,hashlock=e898,amount=45,fee=0,EnvelopMessage{nonce=1,Channel=5676,TransferAmount=0,Locksroot=bbfb,Identifier=9859068678903411547 sender=aaaa,has signature=true}} from=aaaa,expect ack=53d4 name=b021

TRACE[06-30|15:49:51.742|network/protocol.go:476]              protocol send message to raiden... Message{type=MediatedTransfer expiration=2551480,token=e945,recipient=b021,target=b021,initiator=2b0c,hashlock=e898,amount=45,fee=0,EnvelopMessage{nonce=1,Channel=5676,TransferAmount=0,Locksroot=bbfb,Identifier=9859068678903411547 sender=aaaa,has signature=true}} name=b021

DEBUG[06-30|15:49:51.749|channel/channel.go:525]               REGISTERED LOCK node=b02116a9,from=aaaa7f67,to=b02116a9,currentlocksroot=00000000,lockamouont=45,lock_expiration=2551480,lock_hashlock=0xe89812146874f4a796d4f073562a4b0190f39148b6ad6681e850316430cdeb4f 

DEBUG[06-30|15:49:51.749|channel/channel.go:551]               'REGISTERED TRANSFER node=b02116a9,from=aaaa7f67,to=b02116a9,transfer_amount=0,nonce=1,current_locksroot=bbfbc4ff,

transfer=Message{type=MediatedTransfer expiration=2551480,token=e945,recipient=b021,target=b021,initiator=2b0c,hashlock=e898,amount=45,fee=0,EnvelopMessage{nonce=1,Channel=5676,TransferAmount=0,Locksroot=bbfb,Identifier=9859068678903411547 sender=aaaa,has signature=true}} 

ERROR[06-30|15:49:51.75|raidenService.go:1536]                quitevent=ActionInitTargetStateChange

 

goroutine 76 [running]:

runtime/debug.Stack(0x51ec6a0, 0xc4200c3a70, 0x26)

	/usr/local/go/src/runtime/debug/stack.go:24 +0xa7

runtime/debug.PrintStack()

	/usr/local/go/src/runtime/debug/stack.go:16 +0x22

github.com/SmartMeshFoundation/SmartRaiden.(*RaidenService).conditionQuit(0xc43063e580, 0x48a715f, 0x1b)

	/Users/bai/dev/smdev/src/github.com/SmartMeshFoundation/SmartRaiden/raidenService.go:1537 +0x16a

github.com/SmartMeshFoundation/SmartRaiden.(*stateMachineEventHandler).updateStateManagerFromReceivedMessageOrUserRequest(0xc4200d44f8, 0xc4203ac8c0, 0x46f03c0, 0xc4200d7130)

	/Users/bai/dev/smdev/src/github.com/SmartMeshFoundation/SmartRaiden/eventhandler.go:617 +0x188

github.com/SmartMeshFoundation/SmartRaiden.(*stateMachineEventHandler).dispatch(0xc4200d44f8, 0xc4203ac8c0, 0x46f03c0, 0xc4200d7130, 0x0, 0x0, 0x400e397)

	/Users/bai/dev/smdev/src/github.com/SmartMeshFoundation/SmartRaiden/eventhandler.go:70 +0x59

github.com/SmartMeshFoundation/SmartRaiden.(*stateMachineEventHandler).logAndDispatch(0xc4200d44f8, 0xc4203ac8c0, 0x46f03c0, 0xc4200d7130, 0x1, 0xc4200d4d90, 0x0)

	/Users/bai/dev/smdev/src/github.com/SmartMeshFoundation/SmartRaiden/eventhandler.go:65 +0x98

github.com/SmartMeshFoundation/SmartRaiden.(*RaidenService).targetMediatedTransfer(0xc43063e580, 0xc4202d5320)

	/Users/bai/dev/smdev/src/github.com/SmartMeshFoundation/SmartRaiden/raidenService.go:1171 +0x3b3

github.com/SmartMeshFoundation/SmartRaiden.(*raidenMessageHandler).messageMediatedTransfer(0xc42018a630, 0xc4202d5320, 0xc4203a3b00, 0xc4204cf4a0)

	/Users/bai/dev/smdev/src/github.com/SmartMeshFoundation/SmartRaiden/messagehandler.go:373 +0x38e

github.com/SmartMeshFoundation/SmartRaiden.(*raidenMessageHandler).onMessage(0xc42018a630, 0x4a7fd60, 0xc4202d5320, 0xe2cc8f37fa19d453, 0xfd897e7149de574, 0x236d9350b7a37e1, 0x54104c762c0b1265, 0x486dfe7, 0x6)

	/Users/bai/dev/smdev/src/github.com/SmartMeshFoundation/SmartRaiden/messagehandler.go:79 +0x73f

github.com/SmartMeshFoundation/SmartRaiden.(*RaidenService).loop(0xc43063e580)

	/Users/bai/dev/smdev/src/github.com/SmartMeshFoundation/SmartRaiden/raidenService.go:389 +0x33f

github.com/SmartMeshFoundation/SmartRaiden.(*RaidenService).Start.func2(0xc43063e580)

	/Users/bai/dev/smdev/src/github.com/SmartMeshFoundation/SmartRaiden/raidenService.go:278 +0x3a

created by github.com/SmartMeshFoundation/SmartRaiden.(*RaidenService).Start

	/Users/bai/dev/smdev/src/github.com/SmartMeshFoundation/SmartRaiden/raidenService.go:248 +0x45d

exit status 111
